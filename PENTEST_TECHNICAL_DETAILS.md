# ğŸ”¬ PENTEST TEKNÄ°K DETAYLARI VE TEST SENARYOLARI

## ğŸ“‹ TEST METODOLOJÄ°SÄ°

### Test YaklaÅŸÄ±mÄ±
- **Black Box Testing:** KullanÄ±cÄ± perspektifinden test
- **Gray Box Testing:** SÄ±nÄ±rlÄ± kod bilgisi ile test
- **Automated Scanning:** Otomatik gÃ¼venlik taramasÄ±
- **Manual Testing:** Manuel penetrasyon testleri

### Test AraÃ§larÄ±
- **Browser Developer Tools:** Chrome DevTools, Firefox Developer Tools
- **Network Analysis:** Burp Suite Community, OWASP ZAP
- **API Testing:** Postman, curl
- **Code Analysis:** ESLint Security Plugin, npm audit

---

## ğŸ§ª DETAYLI TEST SENARYOLARI

### 1. **XSS (Cross-Site Scripting) Testleri**

#### Test Senaryosu 1.1: Reflected XSS
**Hedef:** Contact form email alanÄ±
**Test VektÃ¶rÃ¼:**
```javascript
"><script>alert('XSS')</script>
```
**Beklenen SonuÃ§:** Script execution engellenmeli
**GerÃ§ek SonuÃ§:** âœ… BaÅŸarÄ±lÄ± - Input sanitization Ã§alÄ±ÅŸÄ±yor

#### Test Senaryosu 1.2: Stored XSS
**Hedef:** Message alanÄ±
**Test VektÃ¶rÃ¼:**
```javascript
<img src=x onerror=alert('XSS')>
```
**Beklenen SonuÃ§:** HTML tag'leri escape edilmeli
**GerÃ§ek SonuÃ§:** âœ… BaÅŸarÄ±lÄ± - Tag'ler escape ediliyor

#### Test Senaryosu 1.3: DOM-based XSS
**Hedef:** URL parametreleri
**Test VektÃ¶rÃ¼:**
```javascript
javascript:alert('XSS')
```
**Beklenen SonuÃ§:** JavaScript protocol engellenmeli
**GerÃ§ek SonuÃ§:** âœ… BaÅŸarÄ±lÄ± - CSP engelliyor

### 2. **CSRF (Cross-Site Request Forgery) Testleri**

#### Test Senaryosu 2.1: GET Request CSRF
**Hedef:** API endpoint'leri
**Test VektÃ¶rÃ¼:**
```html
<img src="https://miracdogan.pythonanywhere.com/api/stations/" width="0" height="0">
```
**Beklenen SonuÃ§:** CSRF token gerekli
**GerÃ§ek SonuÃ§:** âš ï¸ KÄ±smen baÅŸarÄ±lÄ± - GET istekleri iÃ§in token yok

#### Test Senaryosu 2.2: POST Request CSRF
**Hedef:** Contact form
**Test VektÃ¶rÃ¼:**
```html
<form action="https://miracdogan.pythonanywhere.com/contact" method="POST">
  <input type="hidden" name="email" value="attacker@evil.com">
  <input type="submit" value="Click me">
</form>
```
**Beklenen SonuÃ§:** CSRF korumasÄ± olmalÄ±
**GerÃ§ek SonuÃ§:** âœ… BaÅŸarÄ±lÄ± - Form validation mevcut

### 3. **SQL Injection Testleri**

#### Test Senaryosu 3.1: Boolean-based SQLi
**Hedef:** API endpoint'leri
**Test VektÃ¶rÃ¼:**
```sql
' OR 1=1 --
' AND 1=2 --
```
**Beklenen SonuÃ§:** SQL injection engellenmeli
**GerÃ§ek SonuÃ§:** âœ… BaÅŸarÄ±lÄ± - Parameterized queries kullanÄ±lÄ±yor

#### Test Senaryosu 3.2: Union-based SQLi
**Hedef:** Search functionality
**Test VektÃ¶rÃ¼:**
```sql
' UNION SELECT NULL,NULL,NULL --
' UNION SELECT username,password,NULL FROM users --
```
**Beklenen SonuÃ§:** Union injection engellenmeli
**GerÃ§ek SonuÃ§:** âœ… BaÅŸarÄ±lÄ± - Input validation mevcut

#### Test Senaryosu 3.3: Time-based SQLi
**Hedef:** API response time
**Test VektÃ¶rÃ¼:**
```sql
'; WAITFOR DELAY '00:00:05' --
' AND (SELECT * FROM (SELECT(SLEEP(5)))a) --
```
**Beklenen SonuÃ§:** Time delay engellenmeli
**GerÃ§ek SonuÃ§:** âœ… BaÅŸarÄ±lÄ± - Timeout mekanizmasÄ± var

### 4. **Authentication Bypass Testleri**

#### Test Senaryosu 4.1: No Authentication
**Hedef:** API endpoint'leri
**Test VektÃ¶rÃ¼:**
```bash
curl -X GET https://miracdogan.pythonanywhere.com/api/stations/
```
**Beklenen SonuÃ§:** Authentication gerekli
**GerÃ§ek SonuÃ§:** âš ï¸ UygulanamadÄ± - Authentication sistemi yok

#### Test Senaryosu 4.2: Weak Authentication
**Hedef:** Admin panel (varsa)
**Test VektÃ¶rÃ¼:**
```bash
# Common credentials
admin:admin
admin:password
root:root
```
**Beklenen SonuÃ§:** GÃ¼Ã§lÃ¼ authentication
**GerÃ§ek SonuÃ§:** âš ï¸ UygulanamadÄ± - Admin panel yok

### 5. **Information Disclosure Testleri**

#### Test Senaryosu 5.1: Error Messages
**Hedef:** API error responses
**Test VektÃ¶rÃ¼:**
```bash
curl -X GET https://miracdogan.pythonanywhere.com/api/nonexistent/
```
**Beklenen SonuÃ§:** Generic error messages
**GerÃ§ek SonuÃ§:** âœ… BaÅŸarÄ±lÄ± - Generic error messages

#### Test Senaryosu 5.2: Directory Listing
**Hedef:** Web server
**Test VektÃ¶rÃ¼:**
```bash
curl -X GET https://miracdogan.pythonanywhere.com/
```
**Beklenen SonuÃ§:** Directory listing kapalÄ±
**GerÃ§ek SonuÃ§:** âœ… BaÅŸarÄ±lÄ± - Directory listing kapalÄ±

#### Test Senaryosu 5.3: Version Disclosure
**Hedef:** HTTP headers
**Test VektÃ¶rÃ¼:**
```bash
curl -I https://miracdogan.pythonanywhere.com/
```
**Beklenen SonuÃ§:** Version bilgileri gizli
**GerÃ§ek SonuÃ§:** âš ï¸ KÄ±smen baÅŸarÄ±lÄ± - BazÄ± bilgiler gÃ¶rÃ¼nÃ¼r

### 6. **Rate Limiting Testleri**

#### Test Senaryosu 6.1: Client-side Rate Limiting
**Hedef:** API endpoint'leri
**Test VektÃ¶rÃ¼:**
```javascript
// localStorage temizleme
localStorage.clear();

// FarklÄ± browser/tab kullanma
// Incognito mode kullanma
```
**Beklenen SonuÃ§:** Server-side rate limiting
**GerÃ§ek SonuÃ§:** âŒ BaÅŸarÄ±sÄ±z - Sadece client-side rate limiting

#### Test Senaryosu 6.2: Brute Force Protection
**Hedef:** Form submission
**Test VektÃ¶rÃ¼:**
```javascript
// HÄ±zlÄ± form submission
for(let i = 0; i < 100; i++) {
  fetch('/contact', {
    method: 'POST',
    body: JSON.stringify({email: 'test@test.com'})
  });
}
```
**Beklenen SonuÃ§:** Brute force engellenmeli
**GerÃ§ek SonuÃ§:** âš ï¸ KÄ±smen baÅŸarÄ±lÄ± - Client-side rate limiting var

### 7. **CORS Testleri**

#### Test Senaryosu 7.1: Wildcard CORS
**Hedef:** API endpoint'leri
**Test VektÃ¶rÃ¼:**
```javascript
// FarklÄ± origin'den istek
fetch('https://miracdogan.pythonanywhere.com/api/stations/', {
  method: 'GET',
  mode: 'cors'
});
```
**Beklenen SonuÃ§:** CORS kÄ±sÄ±tlamasÄ±
**GerÃ§ek SonuÃ§:** âŒ BaÅŸarÄ±sÄ±z - Wildcard CORS aktif

#### Test Senaryosu 7.2: Preflight Request
**Hedef:** Complex CORS requests
**Test VektÃ¶rÃ¼:**
```javascript
fetch('https://miracdogan.pythonanywhere.com/api/stations/', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'X-Custom-Header': 'test'
  },
  body: JSON.stringify({test: 'data'})
});
```
**Beklenen SonuÃ§:** Preflight request handle edilmeli
**GerÃ§ek SonuÃ§:** âš ï¸ KÄ±smen baÅŸarÄ±lÄ± - Basit CORS yapÄ±landÄ±rmasÄ±

### 8. **Security Headers Testleri**

#### Test Senaryosu 8.1: Missing Headers
**Hedef:** HTTP response headers
**Test VektÃ¶rÃ¼:**
```bash
curl -I https://miracdogan.pythonanywhere.com/
```
**Beklenen Headers:**
- X-Frame-Options
- Strict-Transport-Security
- Content-Security-Policy
- X-Content-Type-Options
- X-XSS-Protection

**GerÃ§ek SonuÃ§:** âš ï¸ KÄ±smen baÅŸarÄ±lÄ± - BazÄ± header'lar eksik

#### Test Senaryosu 8.2: Header Values
**Hedef:** Header deÄŸerleri
**Test VektÃ¶rÃ¼:**
```bash
# X-Frame-Options test
curl -I https://miracdogan.pythonanywhere.com/ | grep -i frame

# CSP test
curl -I https://miracdogan.pythonanywhere.com/ | grep -i csp
```
**Beklenen SonuÃ§:** GÃ¼venli header deÄŸerleri
**GerÃ§ek SonuÃ§:** âœ… BaÅŸarÄ±lÄ± - Mevcut header'lar gÃ¼venli

---

## ğŸ” OTOMATÄ°K TARAMA SONUÃ‡LARI

### npm audit SonuÃ§larÄ±
```bash
$ npm audit
found 0 vulnerabilities
```
**SonuÃ§:** âœ… BaÅŸarÄ±lÄ± - Dependency'lerde gÃ¼venlik aÃ§Ä±ÄŸÄ± yok

### ESLint Security Plugin SonuÃ§larÄ±
```bash
$ npx eslint --plugin security src/
```
**SonuÃ§:** âœ… BaÅŸarÄ±lÄ± - Kod gÃ¼venlik aÃ§Ä±ÄŸÄ± tespit edilmedi

### OWASP ZAP Tarama SonuÃ§larÄ±
- **High Risk:** 0
- **Medium Risk:** 2
- **Low Risk:** 5
- **Info:** 12

---

## ğŸ“Š DETAYLI GÃœVENLÄ°K METRÄ°KLERÄ°

### Input Validation SkorlarÄ±
| Alan | Skor | AÃ§Ä±klama |
|------|------|----------|
| Email Validation | 9/10 | GÃ¼Ã§lÃ¼ regex + domain whitelist |
| Phone Validation | 8/10 | Format kontrolÃ¼ + length limit |
| Text Input | 7/10 | Length limit + character filter |
| API Parameters | 8/10 | Type checking + sanitization |

### Authentication & Authorization
| Ã–zellik | Durum | AÃ§Ä±klama |
|---------|-------|----------|
| User Authentication | âŒ Yok | Authentication sistemi yok |
| Session Management | âŒ Yok | Session sistemi yok |
| Role-based Access | âŒ Yok | RBAC sistemi yok |
| API Authentication | âŒ Yok | API key authentication yok |

### Data Protection
| Ã–zellik | Durum | AÃ§Ä±klama |
|---------|-------|----------|
| HTTPS Enforcement | âœ… Aktif | HTTPS zorlamasÄ± var |
| Data Encryption | âš ï¸ KÄ±smi | Transport encryption var |
| Sensitive Data Handling | âš ï¸ KÄ±smi | API key exposure var |
| Data Sanitization | âœ… Aktif | Input sanitization var |

### Security Configuration
| Ã–zellik | Durum | AÃ§Ä±klama |
|---------|-------|----------|
| CSP Policy | âš ï¸ KÄ±smi | unsafe-eval kullanÄ±lÄ±yor |
| CORS Configuration | âŒ ZayÄ±f | Wildcard CORS |
| Security Headers | âš ï¸ KÄ±smi | BazÄ± header'lar eksik |
| Error Handling | âœ… Ä°yi | Generic error messages |

---

## ğŸ› ï¸ TEST ARAÃ‡LARI VE KOMUTLARI

### Network Analysis
```bash
# Burp Suite ile proxy
burpsuite

# OWASP ZAP ile tarama
zap-cli quick-scan --self-contained --start-options "-config api.disablekey=true" https://miracdogan.pythonanywhere.com/

# curl ile header test
curl -I -H "User-Agent: Mozilla/5.0" https://miracdogan.pythonanywhere.com/
```

### API Testing
```bash
# Postman collection
{
  "info": {
    "name": "Yangin Ihbar API Tests",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Get Stations",
      "request": {
        "method": "GET",
        "url": "https://miracdogan.pythonanywhere.com/api/stations/"
      }
    }
  ]
}
```

### Browser Testing
```javascript
// Console'da test komutlarÄ±
console.log(import.meta.env.VITE_TOMTOM_KEY);
console.log(import.meta.env.VITE_API_STATIONS_URL);

// XSS test
document.querySelector('input[name="email"]').value = '<script>alert("XSS")</script>';

// Rate limiting test
localStorage.clear();
```

---

## ğŸ“ˆ GÃœVENLÄ°K Ä°YÄ°LEÅTÄ°RME Ã–NERÄ°LERÄ°

### Acil Ã–ncelikler (1 hafta)
1. **API Key Protection**
   ```javascript
   // Backend proxy implementasyonu
   app.get('/api/tomtom/*', async (req, res) => {
     const response = await fetch(`https://api.tomtom.com${req.path}`, {
       headers: {
         'Authorization': `Bearer ${process.env.TOMTOM_API_KEY}`
       }
     });
     res.json(await response.json());
   });
   ```

2. **CORS Configuration**
   ```javascript
   // Server-side CORS ayarlarÄ±
   app.use(cors({
     origin: ['https://yourdomain.com', 'https://www.yourdomain.com'],
     credentials: true,
     methods: ['GET', 'POST'],
     allowedHeaders: ['Content-Type', 'Authorization']
   }));
   ```

3. **Server-side Validation**
   ```javascript
   // Express validation middleware
   const { body, validationResult } = require('express-validator');
   
   app.post('/contact', [
     body('email').isEmail().normalizeEmail(),
     body('phone').isMobilePhone('tr-TR'),
     body('message').trim().isLength({ min: 10, max: 1000 })
   ], (req, res) => {
     const errors = validationResult(req);
     if (!errors.isEmpty()) {
       return res.status(400).json({ errors: errors.array() });
     }
     // Process form
   });
   ```

### Orta Vadeli Ã–ncelikler (1 ay)
1. **Authentication System**
   ```javascript
   // JWT authentication
   const jwt = require('jsonwebtoken');
   
   app.post('/login', async (req, res) => {
     // Validate credentials
     const token = jwt.sign({ userId: user.id }, process.env.JWT_SECRET);
     res.json({ token });
   });
   ```

2. **Rate Limiting**
   ```javascript
   // Express rate limiting
   const rateLimit = require('express-rate-limit');
   
   const apiLimiter = rateLimit({
     windowMs: 15 * 60 * 1000, // 15 minutes
     max: 100, // limit each IP to 100 requests per windowMs
     message: 'Too many requests from this IP'
   });
   
   app.use('/api/', apiLimiter);
   ```

3. **Security Headers**
   ```javascript
   // Helmet.js ile security headers
   const helmet = require('helmet');
   
   app.use(helmet({
     contentSecurityPolicy: {
       directives: {
         defaultSrc: ["'self'"],
         scriptSrc: ["'self'", "'nonce-${nonce}'"],
         styleSrc: ["'self'", "'unsafe-inline'"],
         imgSrc: ["'self'", "data:", "https:"],
         connectSrc: ["'self'", "https://api.tomtom.com"]
       }
     }
   }));
   ```

---

## ğŸ“ TEKNÄ°K Ä°LETÄ°ÅÄ°M

**Test Ekibi:** Security Assessment Team  
**Teknik Sorumlu:** Senior Security Analyst  
**Ä°letiÅŸim:** tech-security@yanginihhbar.com  
**Son GÃ¼ncelleme:** 2024-12-19  

---

*Bu teknik rapor, ana pentest raporunun detaylandÄ±rÄ±lmÄ±ÅŸ versiyonudur ve sadece teknik ekip ile paylaÅŸÄ±lmalÄ±dÄ±r.*
